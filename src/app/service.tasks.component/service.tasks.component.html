<div class="container">
  <app-sidebar></app-sidebar>

  <div class="kanban-container">
    <header class="kanban-header">
      <div class="header-title">
        <h2>{{ taskBoard?.service?.name }}</h2>
        <div class="header-info">
          <p>Deadline: {{ taskBoard?.service?.deadline | date: "dd/MM/yyyy"}}</p>
        </div>
      </div>

      <div class="header-progress">
        <p>Project Progress: </p>
        <div class="progress-bar">
          <div class="progress" [style.width.%]="servicesInfo.completionRate"></div>
        </div>
        <strong>{{ formatDecimal(servicesInfo.completionRate) }}%</strong>
      </div>

      <div class="header-actions">
        <button class="add-task" (click)="openPopup()">Add Task</button>
        <button class="back-btn" (click)="goBack()">Back</button>
      </div>
    </header>

    <div *ngIf="showKanban">
      <jqxKanban #kanbanReference [width]="'100%'" [height]="'100%'" [columns]="columns" [source]="dataAdapter"
        (onItemAttrClicked)="openTaskDetailPopup($event.args.item)" (onItemMoved)="onItemMoved($event)">
      </jqxKanban>
    </div>

    <add-task-popup *ngIf="showPopup" (taskAdded)="onTaskAdded($event)" (close)="closePopup()"></add-task-popup>

    <task-popup *ngIf="showTaskDetailPopup" [task]="selectedTask" (close)="closeTaskDetailPopup()"
      (delete)="deleteTask($event)">
    </task-popup>
  </div>
</div>